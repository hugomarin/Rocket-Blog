(function(e){var t=function(){return{tmp:[],hidden:null,adjust:function(t){var s=this;s.hidden=t.parents().andSelf().filter(":hidden");s.hidden.each(function(){var t=e(this);s.tmp.push(t.attr("style"));t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(s){var o=e(this),n=t.tmp[s];if(n===undefined)o.removeAttr("style");else o.attr("style",n)});t.tmp=[];t.hidden=null}}};jQuery.foundation=jQuery.foundation||{};jQuery.foundation.customForms=jQuery.foundation.customForms||{};e.foundation.customForms.appendCustomMarkup=function(s){var o={disable_class:"no-custom"};s=e.extend(o,s);function n(t,s){var o=e(s).hide(),n=o.attr("type"),i=o.next("span.custom."+n);if(i.length===0){i=e('<span class="custom '+n+'"></span>').insertAfter(o)}i.toggleClass("checked",o.is(":checked"));i.toggleClass("disabled",o.is(":disabled"))}function i(o,n){var i=t();var a=e(n),d=a.next("div.custom.dropdown"),c=d.find("ul"),l=d.find(".current"),r=d.find(".selector"),u=a.find("option"),f=u.filter(":selected"),m=0,h="",p;var v=false;if(a.hasClass(s.disable_class))return;if(d.length===0){var g=a.hasClass("small")?"small":a.hasClass("medium")?"medium":a.hasClass("large")?"large":a.hasClass("expand")?"expand":"";d=e('<div class="'+["custom","dropdown",g].join(" ")+'"><a href="#" class="selector"></a><ul /></div>');r=d.find(".selector");c=d.find("ul");h=u.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");c.append(h);v=d.prepend('<a href="#" class="current">'+f.html()+"</a>").find(".current");a.after(d).hide()}else{h=u.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");c.html("").append(h)}d.toggleClass("disabled",a.is(":disabled"));p=c.find("li");u.each(function(t){if(this.selected){p.eq(t).addClass("selected");if(v){v.html(e(this).html())}}});c.css("width","auto");d.css("width","auto");if(!d.is(".small, .medium, .large, .expand")){d.addClass("open");i.adjust(c);m=p.outerWidth()>m?p.outerWidth():m;i.reset();d.removeClass("open");d.width(m+18);c.width(m+16)}}e("form.custom input:radio[data-customforms!=disabled]").each(n);e("form.custom input:checkbox[data-customforms!=disabled]").each(n);e("form.custom select[data-customforms!=disabled]").each(i)};var s=function(t){var s=0,o=t.next();$options=t.find("option");o.find("ul").html("");$options.each(function(){$li=e("<li>"+e(this).html()+"</li>");o.find("ul").append($li)});$options.each(function(t){if(this.selected){o.find("li").eq(t).addClass("selected");o.find(".current").html(e(this).html())}});o.removeAttr("style").find("ul").removeAttr("style");o.find("li").each(function(){o.addClass("open");if(e(this).outerWidth()>s){s=e(this).outerWidth()}o.removeClass("open")});o.css("width",s+18+"px");o.find("ul").css("width",s+16+"px")};var o=function(e){var t=e.prev(),s=t[0];if(false===t.is(":disabled")){s.checked=s.checked?false:true;e.toggleClass("checked");t.trigger("change")}};var n=function(e){var t=e.prev(),s=t.closest("form.custom"),o=t[0];if(false===t.is(":disabled")){s.find('input:radio[name="'+t.attr("name")+'"]').next().not(e).removeClass("checked");if(!e.hasClass("checked")){e.toggleClass("checked")}o.checked=e.hasClass("checked");t.trigger("change")}};e(document).on("click","form.custom span.custom.checkbox",function(t){t.preventDefault();t.stopPropagation();o(e(this))});e(document).on("click","form.custom span.custom.radio",function(t){t.preventDefault();t.stopPropagation();n(e(this))});e(document).on("change","form.custom select[data-customforms!=disabled]",function(t){s(e(this))});e(document).on("click","form.custom label",function(t){var s=e("#"+e(this).attr("for")+"[data-customforms!=disabled]"),i,a;if(s.length!==0){if(s.attr("type")==="checkbox"){t.preventDefault();i=e(this).find("span.custom.checkbox");if(i.length==0){i=e(this).next("span.custom.checkbox")}if(i.length==0){i=e(this).prev("span.custom.checkbox")}o(i)}else if(s.attr("type")==="radio"){t.preventDefault();a=e(this).find("span.custom.radio");if(a.length==0){a=e(this).next("span.custom.radio")}if(a.length==0){a=e(this).prev("span.custom.radio")}n(a)}}});e(document).on("click","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var s=e(this),o=s.closest("div.custom.dropdown"),n=o.prev();t.preventDefault();e("div.dropdown").removeClass("open");if(false===n.is(":disabled")){o.toggleClass("open");if(o.hasClass("open")){e(document).bind("click.customdropdown",function(t){o.removeClass("open");e(document).unbind(".customdropdown")})}else{e(document).unbind(".customdropdown")}return false}});e(document).on("click","form.custom div.custom.dropdown li",function(t){var s=e(this),o=s.closest("div.custom.dropdown"),n=o.prev(),i=0;t.preventDefault();t.stopPropagation();e("div.dropdown").removeClass("open");s.closest("ul").find("li").removeClass("selected");s.addClass("selected");o.removeClass("open").find("a.current").html(s.html());s.closest("ul").find("li").each(function(e){if(s[0]==this){i=e}});n[0].selectedIndex=i;n.trigger("change")});e.fn.foundationCustomForms=e.foundation.customForms.appendCustomMarkup})(jQuery);